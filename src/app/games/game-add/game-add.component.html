<md-toolbar>
    <app-back-button
        #backButton
        [disabled]="isPosting"
    ></app-back-button>
    <app-title [value]="'Create a game'"></app-title>
    <div class="toolbar-icon-spacer"></div>
</md-toolbar>

<form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div formGroupName="location">
        <md-input
            #locationName
            [dividerColor]="
                locationControls.name.valid ||
                locationControls.name.pristine ?
                'primary' : 'warn'
            "
            [style.width]="'100%'"
            formControlName="name"
            placeholder="Game location"
            required
            type='text'
        >
            <md-hint *ngIf="locationName.focused" align="end">
                <span *ngIf="locationControls.name.errors?.required">
                    required
                </span>
                <span *ngIf="!locationControls.name.errors?.required">
                    {{ locationName.characterCount }} / 30
                </span>
            </md-hint>
        </md-input>

        <!-- <md-card class="locations-list" [hidden]="!showLocationsList">
            <md-list>
                <md-list-item
                    *ngFor="
                        let location of locations
                        | textSearch:locationName.value
                        | slice:0:5
                    "
                    (click)="setLocation(location)"
                >
                    <h3 md-line>{{ location.name }}</h3>
                    <p md-line>{{ location.address }}</p>
                </md-list-item>
            </md-list>
        </md-card> -->

        <md-input
            #locationAddress
            [dividerColor]="
                locationControls.address.valid ||
                locationControls.address.pristine ?
                'primary' : 'warn'
            "
            [style.width]="'100%'"
            autocomplete="off"
            formControlName="address"
            placeholder="Address"
            type='text'
        >
            <md-hint *ngIf="locationAddress.focused" align="end">
                <span *ngIf="locationControls.address.errors?.required">
                    required
                </span>
                <span *ngIf="!locationControls.address.errors?.required">
                    {{ locationAddress.characterCount }} / 255
                </span>
            </md-hint>
        </md-input>
    </div>

    <md-input-container
        [style.width]="'100%'"
        [dividerColor]="
            form.controls.date?.valid ||
            form.controls.date?.pristine ?
            'primary' : 'warn'
        "
    >
        <input
            md-input
            #date
            formControlName="date"
            placeholder="Game date"
            required
            type='date'
        >
        <md-hint *ngIf="date.focused" align="end">
            <span *ngIf="controls.date.errors?.required">
                required
            </span>
        </md-hint>
    </md-input-container>

    <md-input-container [style.width]="'100%'">
        <input
            md-input
            formControlName="time"
            [placeholder]="'Game time (' + tzName + ')'"
            required
            type='time'
        >
        <md-hint *ngIf="date.focused" align="end">
            <span *ngIf="controls.date.errors?.required">
                required
            </span>
        </md-hint>
    </md-input-container>

    <div class="buttons">
        <button
            (click)="backButton.back()"
            [disabled]="isPosting"
            md-raised-button
        >
            Cancel
        </button>
            <!-- [disabled]="form.invalid || isPosting" -->
        <button
            color="primary"
            md-raised-button
            type="submit"
        >
            Save
        </button>
    </div>
</form>
